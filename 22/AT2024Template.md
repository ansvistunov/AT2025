# Содержание
1. [Введение](#1-введение)
   - [Цели](#цели)
   - [Границы применения](#границы-применения)
   - [Термины и аббревиатуры](#термины-и-аббревиатуры)
   - [Ссылки](#ссылки)
   - [Краткий обзор](#краткий-обзор)
2. [Общее описание](#2-общее-описание)
   - [Описание изделия](#описание-изделия)
   - [Функции изделия](#функции-изделия)
   - [Характеристики пользователей](#характеристики-пользователей)
   - [Ограничения](#ограничения)
   - [Предположения и зависимости](#предположения-и-зависимости)
3. [Детальные требования](#3-детальные-требования)
   - [Функциональные требования](#функциональные-требования)
   - [Надежность](#надежность)
   - [Производительность](#производительность)
   - [Ремонтопригодность](#ремонтопригодность)
   - [Ограничения проекта](#ограничения-проекта)
   - [Требования к пользовательской документации](#требования-к-пользовательской-документации)
   - [Используемые компоненты](#используемые-компоненты)
   - [Интерфейсы](#интерфейсы)
   - [Требования лицензирования](#требования-лицензирования)
   - [Применимые стандарты](#применимые-стандарты)
4. [Индекс](#индекс)

---

# История изменений
| Дата       | Версия | Описание           | Автор(ы)                                                                  |
|------------|--------|--------------------|---------------------------------------------------------------------------|
| 2025-10-10 | 0.1    | 	Начальная ревизия | Паньков, Королев, Самойленко, Назарова, Черемхин |
| 2025-11-13 | 1.0    | Вторая ревизия     | Паньков, Королев, Самойленко, Назарова, Черемхин |

---

# 1. Введение

## Цели
Данный документ определяет требования к системе мониторинга состояния сотрудников на опасном производстве (Дзержинская ТЭЦ) для обнаружения и оперативного реагирования на чрезвычайные ситуации, связанные со здоровьем сотрудников (сердечный приступ, инсульт, падение).

## Границы применения
Система предназначена для мониторинга ЭКГ, движения сотрудников, а также приема сигналов тревожной кнопки в реальном времени. Информация отображается на панели начальника смены, обеспечивая оперативное оповещение и минимизацию риска ЧС.

## Термины и аббревиатуры
- **ЭКГ** — электрокардиограмма
- **ТЭЦ** — теплоэлектроцентраль
- **Акселерометр** — датчик движения
- **API** — интерфейс программирования приложений
- **MQTT** — протокол публикации/подписки для IoT
- **HTTP** — протокол передачи гипертекста
- **UI** — пользовательский интерфейс
- **JSON** — текстовый формат обмена данными
- **Wi-Fi** — беспроводная сеть передачи данных
- **BLE** — Bluetooth Low Energy
- **REST** — архитектурный стиль взаимодействия компонентов по HTTP
- **IoT** — интернет вещей
- **ESP32** — микроконтроллер с Wi-Fi и Bluetooth
- **CPU** — центральный процессор
- **RAM** — оперативная память
- **ORM** — объектно-реляционное отображение
- **SRS** — спецификация требований к программному обеспечению
- **Docker** — система контейнеризации ПО
- **PostgreSQL** — система управления базами данных
- **SPI** — последовательный периферийный интерфейс
- **I2C** — последовательный интерфейс межмикросхемного взаимодействия
- **I2S** — интерфейс цифровой передачи аудиосигнала
- **ADC** — аналого-цифровой преобразователь
- **PSU** — источник питания
- **СКД** — система контроля допуска

## Ссылки
| Обозначение | Расшифровка |
|-------------|-------------|
| [IEEE-830] | IEEE Std 830-1998 |
| [ESP32-Docs] | Документация ESP32 |
| [LIS2DM-Docs] | Документация LIS2DM |
| [MAX98357A-Docs] | Документация MAX98357A |
| [INMP441-Docs] | Документация INMP441 |
| [TP4056-Docs] | Документация TP4056 |
| [TPS63020-Docs] | Документация TPS63020 |
| [Ubuntu] | Ubuntu Official |
| [Docker] | Docker Official |
| [WiFi-Lib] | Arduino ESP32 WiFi Library |
| [PubSubClient] | PubSubClient GitHub |
| [ArduinoJson] | ArduinoJson GitHub |
| [ESPAsyncWebServer] | ESPAsyncWebServer GitHub |
| [WebSerial] | WebSerial GitHub |

## Краткий обзор
Документ описывает функциональные, интерфейсные, надежностные требования и принципы работы системы согласно рекомендациям IEEE 830.

---

# 2. Общее описание

## Описание изделия
Система является частью комплекса безопасности предприятия, интегрируется с уже существующей инфраструктурой (панели мониторинга, устройства с датчиками, система контроля допуска).

## Функции изделия
- Сбор и передача данных ЭКГ и акселерометра от каждого сотрудника
- Обработка данных в реальном времени
- Реакция на тревожную кнопку
- Звуковая и визуальная индикация на месте происшествия и на панели мониторинга
- Интеграция с системой контроля допуска для активации мониторинга

## Характеристики пользователей
- **Начальник смены** — оператор панели мониторинга
- **Сотрудники смены** — носят устройство мониторинга
- **Служба реагирования** — получает уведомления
- **Администратор СКД** — управляет привязкой устройств к сотрудникам

## Ограничения
- Требования к бесперебойной работе 24/7
- Максимальное время простоя — не более 0.01%
- Время реакции — не более 10 секунд
- Время восстановления — не более 10 минут

## Предположения и зависимости
- На сотрудников можно крепить датчики
- Учтены правила эксплуатации оборудования на опасных участках
- Доступ к сети передачи данных гарантирован
- Система контроля допуска предоставляет API для интеграции

---

# 3. Детальные требования

## Функциональные требования
- Система должна мониторить ЭКГ и движение каждого сотрудника в реальном времени
- При срабатывании порогов (по ЭКГ/движению) или активации тревожной кнопки, начальник смены немедленно уведомляется
- Устройства сотрудников подают звуковой сигнал при происшествиях
- Реализована цветовая индикация статусов на панели:
   - Зеленый — норма
   - Желтый — пограничные показатели
   - Красный — критические показатели/тревожная кнопка
   - Черный — отказ устройства
- Звуковая индикация включает два различных звуковых сигнала:
   - Прерывистый сигнал — срабатывание по пороговым значениям
   - Непрерывный сигнал — активация тревожной кнопки
   - Периодический сигнал — отказ устройства
- Оповещение должно происходить в течение 10 секунд с момента события
- Система должна автоматически определять отказ носимых устройств

## Надежность
- **Доступность**: 99.99%
- **MTBF**: подлежит уточнению
- **MTTR**: не более 10 минут
- **Точность**: подлежит уточнению
- **Макс. количество ошибок**: подлежит уточнению

## Производительность
- **Время отклика**: не более 10 секунд
- **Пропускная способность**: обработка нескольких параллельных потоков данных
- **Утилизация ресурсов**: подлежит выяснению

## Ремонтопригодность
Система должна поддерживать автоматический контроль состояния и резервирование критических компонентов для устойчивой работы. Реализована индикация отказа носимых устройств на панели мониторинга (черный цвет) с соответствующим звуковым сигналом для немедленного реагирования службы технического обслуживания.

## Ограничения проекта
- Устройства должны быть совместимы с имеющейся инфраструктурой
- Интеграция с системой контроля допуска: каждый персональный монитор сотрудника прикрепляется к конкретному человеку. Система получает данные из СКД и активирует канал связи только когда сотрудник находится на смене
- Крепление датчиков разрешено нормативами предприятия
- Использование промышленных стандартов по электробезопасности

## Требования к пользовательской документации
Документация должна включать форматы сообщений для панели мониторинга, методику тестирования, глоссарий терминов, историю изменений и инструкции по интеграции с системой контроля допуска.

## Используемые компоненты
- **Микроконтроллер**: ESP32 с поддержкой Wi-Fi, Bluetooth, SPI, I2C
- **Сенсор ЭКГ**: ADS1292R с SPI интерфейсом
- **Акселерометр**: LIS2DM с SPI/I2C, функциями детекции движения
- **ЦАП и усилитель**: MAX98357A с интерфейсом I2S
- **Динамик**: Mini Metal Speaker 8 Ом 0.5 Вт
- **Микрофон**: MEMS микрофон INMP441 с интерфейсом I2S
- **Аккумулятор**: Литий-ионный аккумулятор 18650, 3350 мАч
- **Зарядное устройство**: Плата заряда TP4056 с защитой
- **Преобразователь**: Buck-Boost преобразователь TPS63020
- **Сервер**: 16GB RAM, 8 Core Intel Xeon E-2288G, Ubuntu 22.0.1, Docker
- **Библиотеки ESP32**: WiFi.h, PubSubClient, ArduinoJson, ESPAsyncWebServer, ESPAsyncTCP, WebSerial
- **Оборудование Wi-Fi**: Точки доступа для развертки сети покрытия производственных помещений

## Интерфейсы
- **Интерфейс пользователя**: Панель мониторинга отображает статус сотрудников с цветовой кодировкой:
   - Зеленый — норма
   - Желтый — пограничное состояние
   - Красный — критическое состояние/тревожная кнопка
   - Черный — отказ устройства
     Звуковые сигналы различаются для различных типов событий
- **Аппаратные интерфейсы**: Устройства сотрудников: ЭКГ, акселерометр, тревожная кнопка, звуковые индикаторы
- **Программные интерфейсы**: Интеграция с системой безопасности предприятия и системой контроля допуска
- **Интерфейсы коммуникаций**:
   - Передача данных в реальном времени по протоколам MQTT, WebSocket, HTTP REST API
   - Развертка выделенной Wi-Fi сети для обеспечения стабильного покрытия всех производственных помещений
   - Резервный канал связи через BLE

## Требования лицензирования
Соблюдение стандартов лицензирования используемого ПО и компонентов.

## Применимые стандарты
- IEEE Std 830-1998
- Внутренние нормативные документы предприятия
- Стандарты электробезопасности для промышленного оборудования

---

# Индекс
[Индекс.]
