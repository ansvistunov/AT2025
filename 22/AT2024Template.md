# **Содержание**

1. **[Введение](#1-введение)**
   - [Цели](#цели)
   - [Границы применения](#границы-применения)
   - [Термины и аббревиатуры](#термины-и-аббревиатуры)
   - [Ссылки](#ссылки)
   - [Краткий обзор](#краткий-обзор)
2. **[Общее описание](#2-общее-описание)**
   - [Описание изделия](#описание-изделия)
   - [Функции изделия](#функции-изделия)
   - [Характеристики пользователей](#характеристики-пользователей)
   - [Ограничения](#ограничения)
   - [Предположения и зависимости](#предположения-и-зависимости)
3. **[Детальные требования](#3-детальные-требования)**
   - [Функциональные требования](#31-функциональные-требования)
     - [Функции носимого устройства](#311-функции-носимого-устройства)
     - [Функции сервера-обработчика](#312-функции-сервера-обработчика)
     - [Функции UI родственников](#313-функции-ui-родственников)
     - [Функции UI оператора экстренных служб](#314-функции-ui-оператора-экстренных-служб)
   - [Нефункциональные требования](#32-нефункциональные-требования)
     - [Надёжность](#321-надёжность)
     - [Производительность](#322-производительность)
     - [Ремонтопригодность](#323-ремонтопригодность)
     - [Ограничения проекта](#324-ограничения-проекта)
   - [Табличное представление требований](#33-табличное-представление-требований)
     - [Функциональные требования (таблица)](#331-функциональные-требования)
     - [Нефункциональные требования (таблица)](#332-нефункциональные-требования)
   - [Требования к пользовательской документации](#34-требования-к-пользовательской-документации)
   - [Используемые компоненты](#35-используемые-компоненты)
   - [Интерфейсы](#36-интерфейсы)
   - [Требования лицензирования](#37-требования-лицензирования)
   - [Применимые стандарты](#38-применимые-стандарты)
4. **[Индекс](#4-индекс)**
---
# **История изменений**

| Дата       | Версия | Описание изменений                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Автор                                            |
| ---------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| 2025-10-10 | 0.1    | Начальная ревизия                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Паньков, Королев, Самойленко, Назарова, Черемхин |
| 2025-11-13 | 1.0    | Вторая ревизия                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Паньков, Королев, Самойленко, Назарова, Черемхин |
| 2025-12-06 | 1.1    | Третья ревизия                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Паньков, Королев, Самойленко, Назарова, Черемхин |
| 2025-12-08 | 2.1    | Структурная реорганизация документа в соответствии со стандартом IEEE 830. Интеграция исправленного и дополненного третьего блока требований. Упорядочена нумерация разделов и подразделов.                                                                                                                                                                                                                                                                                                                                                             | Паньков, Королев, Самойленко, Назарова, Черемхин |
| 2025-12-08 | 2.2    | Детализирована конфигурация носимого устройства: уточнена структура (родительский блок, манжета, электроды, опциональная клипса). Разделены интерфейсы для родственников (мобильное приложение) и оператора экстренных служб (веб-интерфейс). SIM-лоток и LTE-канал изменены с опциональных на обязательные. Исправлено место крепления электродов ЭКГ с запястной манжеты на нагрудные электроды. Уточнен метод вычисления давления. Заменены англицизмы на русские эквиваленты. Детализирована конфигурация источника бесперебойного питания сервера. | Паньков, Королев, Самойленко, Назарова, Черемхин |
| 2025-12-08 | 2.3    | Дополнен раздел 2 "Общее описание": добавлено упоминание ИБП и док-станции в интерфейсы аппаратных средств, добавлен подраздел "Ограничения памяти" для соответствия IEEE 830. Дополнены таблицы требований полными данными. Расширен индекс документа недостающими терминами. Уточнены все упоминания компонентов системы для обеспечения согласованности документа.                                                                                                                                                                                   | Паньков, Королев, Самойленко, Назарова, Черемхин |
| 2025-12-08 | 2.4    | Детализированы таблицы требований: добавлены технические параметры (пороги падения, неподвижности, интервалы heartbeat), конкретные значения производительности и надёжности, детали компонентов с указанием интерфейсов. Уточнены формулировки для всех требований с указанием конкретных значений и параметров.                                                                                                                                                                                                                                       | Паньков, Королев, Самойленко, Назарова, Черемхин |
| 2025-12-08 | 2.5    | Структурные улучшения документа: добавлены разделы "Атрибуты функциональных требований" и "Атрибуты нефункциональных требований" с описанием атрибутов (ID, Наименование, Критичность, Стабильность) и полной схемой идентификаторов в начале разделов 3.1 и 3.2. Улучшена навигация: добавлены кликабельные ссылки на разделы документа в индексе (раздел 4). Унификация терминологии: заменён атрибут "Важность" на "Критичность" во всём документе для согласованности. Добавлены текстовые расшифровки к буквенным обозначениям атрибутов во всех требованиях и таблицах: M (обязательное), S (желательное), C (возможное) для Критичность и S (стабильное), M (модифицируемое), D (динамичное) для Стабильность. | Паньков, Королев, Самойленко, Назарова, Черемхин |

---
# **1. Введение**

## **Цели**

Документ определяет требования к системе мониторинга здоровья пожилых пациентов на дому для обнаружения и оперативного реагирования на чрезвычайные ситуации (падение, сердечный приступ, прочие сердечные аномалии, повышение или понижение давления). Система обеспечивает реал-тайм мониторинг, автоматические тревоги и связь с родственниками/скорой помощью.

## **Границы применения**

Система предназначена для мониторинга: ЭКГ/пульса, акселерометра (падения и движения), давления пожилых пациентов на дому, а также приёма сигналов тревожной кнопки в реальном времени. Информация отображается в мобильном приложении родственников и на отдельной панели оператора экстренных служб, обеспечивая оперативное оповещение через само приложение или IP-АТС (Автоматическая телефонная станция), двустороннюю аудиосвязь и автоматический вызов скорой помощи при необходимости, с минимизацией рисков чрезвычайных ситуаций со здоровьем. Система не предоставляет медицинскую диагностику — исключительно мониторинг параметров и оповещение заинтересованных лиц.

## **Термины и аббревиатуры**

*   **ЭКГ** — электрокардиограмма
*   **ЧСС** — частота сердечных сокращений
*   **IP-АТС** — виртуальная IP-телефония (Автоматическая телефонная станция)
*   **OTA** — обновление ПО "по воздуху" (Over-The-Air)
*   **Heartbeat** — периодические диагностические сообщения о состоянии
*   **Акселерометр** — датчик движения и ускорения
*   **API** — интерфейс программирования приложений
*   **MQTT** — протокол публикации/подписки для IoT
*   **HTTP** — протокол передачи гипертекста
*   **UI** — пользовательский интерфейс
*   **JSON** — текстовый формат обмена данными
*   **Wi‑Fi** — беспроводная сеть передачи данных
*   **BLE** — Bluetooth Low Energy
*   **REST** — архитектурный стиль взаимодействия компонентов по HTTP
*   **IoT** — интернет вещей
*   **ESP32** — микроконтроллер с Wi‑Fi и Bluetooth
*   **CPU** — центральный процессор
*   **RAM** — оперативная память
*   **SRS** — спецификация требований к программному обеспечению
*   **Docker** — система контейнеризации ПО
*   **PostgreSQL** — система управления базами данных
*   **SPI** — последовательный периферийный интерфейс
*   **I2C** — интерфейс межмикросхемного взаимодействия
*   **I2S** — интерфейс цифровой передачи аудиосигнала
*   **ADC** — аналого‑цифровой преобразователь
*   **PSU** — источник питания
*   **ИБП** — источник бесперебойного питания

## **Ссылки**

| Обозначение          | Расшифровка                                                                                                                               |
| -------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| [IEEE-830]           | [IEEE Std 830-1998](https://standards.ieee.org/standard/830-1998.html)                                                                    |
| [ESP32-Docs]         | [Документация ESP32](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/)                                                        |
| [ADS1292R-Docs]      | [Документация ADS1292R (ЭКГ)](https://www.ti.com/lit/ds/symlink/ads1292r.pdf)                                                             |
| [LIS2DM-Docs]        | [Документация LIS2DM](https://www.st.com/resource/en/datasheet/lis2dm.pdf)                                                                |
| [MAX98357A-Docs]     | [Документация MAX98357A](https://www.analog.com/media/en/technical-documentation/data-sheets/max98357a-max98357b.pdf)                     |
| [MAX30102EFD+T-Docs] | [Документация MAX30102EFD+T (оптический датчик пульса)](https://www.analog.com/media/en/technical-documentation/data-sheets/MAX30102.pdf) |
| [INMP441-Docs]       | [Документация INMP441](https://invensense.tdk.com/wp-content/uploads/2015/02/INMP441.pdf)                                                 |
| [TP4056-Docs]        | [Документация TP4056](https://datasheet.lcsc.com/lcsc/1811151437_Top-Power-TP4056_C81425.pdf)                                             |
| [TPS63020-Docs]      | [Документация TPS63020](https://www.ti.com/lit/ds/symlink/tps63020.pdf)                                                                   |
| [Ubuntu]             | [Ubuntu Official](https://ubuntu.com/)                                                                                                    |
| [Docker]             | [Docker Official](https://www.docker.com/)                                                                                                |
| [WiFi-Lib]           | [Arduino ESP32 WiFi Library](https://github.com/espressif/arduino-esp32/tree/master/libraries/WiFi)                                       |
| [PubSubClient]       | [PubSubClient GitHub](https://github.com/knolleary/pubsubclient)                                                                          |
| [ArduinoJson]        | [ArduinoJson GitHub](https://github.com/bblanchon/ArduinoJson)                                                                            |
| [ESPAsyncWebServer]  | [ESPAsyncWebServer GitHub](https://github.com/ESP32Async/ESPAsyncWebServer)                                                               |
| [RPi5-Specs]         | [Raspberry Pi 5 спецификации](https://www.raspberrypi.com/products/raspberry-pi-5/)                                                       |
| [STWBC-MC-Docs]      | [Документация STWBC-MC (контроллер беспроводной зарядки Qi)](https://www.st.com/resource/en/datasheet/stwbc-mc.pdf)                       |

## **Краткий обзор**

Документ описывает функциональные, интерфейсные, надежностные требования и принципы работы системы мониторинга здоровья пожилых пациентов на дому согласно рекомендациям IEEE 830. Система состоит из носимых устройств (родительский блок с креплением на груди/поясе, подключаемая манжета с оптическими датчиками, нагрудные электроды и опциональная ушная клипса), сервера обработки на базе Raspberry Pi 5, **мобильного приложения для родственников** и **веб-интерфейса для оператора экстренных служб**. Она обеспечивает непрерывный сбор биометрических данных, анализ на предмет критических событий и автоматическое оповещение с минимальной задержкой.

---

# **2. Общее описание**

## **Описание изделия**

Система является частью домашнего комплекса мониторинга здоровья пожилых пациентов, интегрируется с инфраструктурой связи (IP-АТС, системы скорой помощи, мобильные приложения родственников).

* **Интерфейсы системы**: серверный компонент (Raspberry Pi 5), **мобильное приложение для родственников**, **веб-интерфейс для оператора экстренных служб** и носимые устройства, связанные через Wi‑Fi/BLE и протоколы MQTT/WebSocket/HTTP REST.
* **Интерфейсы пользователя**:
    * **Для родственника/опекуна**: Мобильное приложение (iOS/Android) для мониторинга статуса пациента, просмотра истории, управления оповещениями и инициации голосовой связи.
    * **Для оператора экстренных служб (опционально)**: Веб-панель для приёма автоматических оповещений, просмотра данных пациента и истории событий в рамках инцидента.
    * **Для оператора службы поддержки/медперсонала (опционально)**: Расширенный веб-интерфейс администратора для мониторинга группы пациентов, анализа журналов и диагностики системы.
* **Интерфейсы аппаратных средств ЭВМ**: сервер на базе Raspberry Pi 5 с ОС Ubuntu/Raspberry Pi OS (64-bit), поддержкой Docker, встроенным модулем беспроводной зарядки на базе чипа STWBC-MC (док-станция для аккумуляторов носимых устройств), **обязательным модулем LTE с SIM-лотком**, накопителем SSD через USB 3.0 или NVMe через PCIe (не microSD), и **источником бесперебойного питания (ИБП)** для обеспечения работы при отключении электроэнергии.
* **Интерфейсы программного обеспечения**: REST API для интеграции с IP-АТС и системами скорой помощи, а также MQTT/WebSocket для обмена данными в реальном времени.
* **Интерфейсы коммуникаций**: домашняя Wi‑Fi‑сеть, резервный BLE-канал между устройствами и сервером, а также **обязательный резервный LTE-канал через SIM-модуль сервера**.
* **Ограничения памяти**: серверная система должна иметь оперативную память не менее 8 ГБ LPDDR4X (рекомендуется 16 ГБ) для обеспечения работы контейнеризованных сервисов, базы данных PostgreSQL и обработки данных от множества носимых устройств одновременно.

## **Функции изделия**

1. Сбор и передача данных ЭКГ, пульса, давления и движения от пациента.
2. Локальный (на устройстве) и серверный анализ данных для выявления 6+ критических сценариев (аритмия, падение и др.).
3. Немедленная реакция на нажатие физической тревожной кнопки.
4. Автоматическая активация двусторонней аудиосвязи при тревоге.
5. Интеграция с IP-АТС и системами экстренной связи для цепочки оповещений (родственник → скорая).
6. Обеспечение отказоустойчивости через резервные каналы связи (Wi-Fi → BLE) и автономные съемные аккумуляторы.

## **Характеристики пользователей**

1. **Пациент** (пожилой человек): носит устройство, использует тревожную кнопку, общается через встроенный микрофон/динамик. Ограниченные технические навыки.
2. **Родственник/Опекун**: основной пользователь **мобильного приложения**. Мониторит состояние пациента, получает оповещения, инициирует голосовую связь, управляет настройками. Имеет базовые технические навыки.
3. **Оператор экстренных служб (например, скорой помощи)**: использует специализированный **веб-интерфейс** для приёма и обработки автоматических вызовов от системы, просмотра переданных данных пациента (статус, история) в момент инцидента.
4. **Оператор службы поддержки/медперсонал (опционально)**: использует расширенный веб-интерфейс администратора для мониторинга группы пациентов, анализа журналов событий и диагностики системы. Функциональность данного интерфейса описана в разделе 3.2.3 (MAINT-NF-3).

## **Ограничения**

1. Требования к бесперебойной работе 24/7, доступность системы — не менее 99.9%.
2. Суммарное время отклика системы от детекции события до оповещения — не более 5 секунд для критических событий.
3. Время восстановления после сбоя критических компонентов — не более 10 минут.
4. Автономность носимого устройства — не менее 12 часов непрерывной работы.
5. Серверная система должна использовать накопитель SSD через USB 3.0 или NVMe через PCIe; работа с базой данных PostgreSQL на microSD карте не допускается из-за требований производительности и надёжности.
6. Сервер должен быть оснащён источником бесперебойного питания (ИБП) для обеспечения непрерывной работы при отключении электроэнергии.

## **Предположения и зависимости**

1. Пациент согласен и способен носить родительский блок устройства (с креплением на груди или поясе), подключаемую манжету на запястье, нагрудные электроды и, при необходимости, ушную клипсу.
2. В месте проживания пациента доступна стабильная сеть Wi-Fi, **обязательно** обеспечена работа через резервный BLE-канал и **обязательный** LTE-канал через сервер.
3. Интеграционные API внешних сервисов (IP-АТС, службы экстренной связи) являются доступными и стабильными.
4.  Родственники/опекуны имеют смартфон для установки мобильного приложения. Оператор экстренных служб имеет доступ к веб-браузеру.

---

# **3. Детальные требования**

## **3.1 Функциональные требования**

### Атрибуты функциональных требований

Каждое функциональное требование должно обладать следующими атрибутами:

- **ID** - уникальный идентификатор требования
- **Наименование** - краткое описание требования
- **Критичность** - M (обязательное), S (желательное), C (возможное)
- **Стабильность** - S (стабильное), M (модифицируемое), D (динамичное)

### Полная схема идентификаторов

| Префикс | Расшифровка | Роль |
|---------|-------------|------|
| W-F- | Functional - Wearable | Носимое устройство |
| SRV-F- | Functional - Server | Сервер-обработчик |
| OP-F- | Functional - Operator (Relative) | Мобильное приложение для родственников |
| EMS-OP-F- | Functional - Emergency Services Operator | Веб-интерфейс оператора экстренных служб |
| REL-NF- | Non-Functional - Reliability | Надёжность |
| PERF-NF- | Non-Functional - Performance | Производительность |
| MAINT-NF- | Non-Functional - Maintainability | Ремонтопригодность |
| CONST-NF- | Non-Functional - Constraints | Ограничения проекта |

### **3.1.1 Функции носимого устройства (Wearable, W-F)**

**W-F-1. Мониторинг ЭКГ/пульса/давления**
Носимое устройство должно непрерывно измерять электрокардиограмму (ЭКГ) с датчика ADS1292R через **нагрудные электроды**, частоту сердечных сокращений (ЧСС) и пульсовые волны с двух оптических датчиков MAX30102EFD+T в **запястной манжете** и опциональной ушной клипсы с MAX30102EFD+T; данные с всех источников алгоритмически усредняются для повышения точности и диверсификации; вычислять величину кровяного давления по дельте времени пульсаций **между сигналами с манжеты и ушной клипсы, а в случае отсутствия клипсы — между сигналами с нагрудных электродов и манжеты**; выявлять предположения об отклонениях (аритмия, тахикардия, брадикардия, стенокардия, гипертрофия отделов сердца) без постановки диагноза с выводом информационных сообщений в UI; передавать агрегированные данные на сервер с интервалом 1–5 секунд по протоколам MQTT или WebSocket.

- Компонент: носимое устройство
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: функциональное, медицинский мониторинг

**W-F-2. Детекция движения и падений**
Носимое устройство должно измерять линейные ускорения по трём осям с использованием акселерометра LIS2DM и выявлять события падения (ускорение >3g с последующим отсутствием движения >1с), длительную неподвижность (>30с без изменений >0.1g) или аномальные движения (скачки >2g без падения), передавая соответствующие события на сервер.
- Компонент: носимое устройство
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: функциональное, алгоритмическое

**W-F-3. Тревожная кнопка**
Носимое устройство должно иметь физическую тревожную кнопку, подключённую к GPIO микроконтроллера, нажатие которой фиксируется аппаратно и в течение не более 2 секунд генерирует событие тревоги с передачей на сервер по основному (Wi-Fi) или резервному (BLE) каналу связи.
- Компонент: носимое устройство
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: функциональное, интерфейс пользователя

**W-F-4. Голосовая связь и звуковая индикация**
Носимое устройство должно поддерживать двустороннюю голосовую связь через микрофон INMP441 и ЦАП MAX98357A с динамиком. Голосовая связь активируется автоматически при наступлении критического события или может быть активирована родственником или оператором через пользовательский интерфейс. Звуковая индикация на устройстве присутствует, но включается только по команде заинтересованного лица из приложения для поиска пациента или других целей.
- Компонент: носимое устройство
- Критичность: S (желательное)
- Стабильность: M (модифицируемое)
- Тип: функциональное, интерфейс пользователя

**W-F-5. Heartbeat-сообщения**
Носимое устройство должно периодически (с **настраиваемым** интервалом, по умолчанию 30 секунд) передавать на сервер своё техническое состояние (норма/пограничное/критическое/отказ), медицинские показатели пациента и параметры связи в формате heartbeat-сообщений по протоколам MQTT или WebSocket.
- Компонент: носимое устройство
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: функциональное, диагностическое

**W-F-6. Резервный канал связи и автономность питания**
Носимое устройство должно автоматически переключаться между основным каналом связи Wi-Fi и резервным BLE при недоступности основного канала (по таймауту или уровню сигнала); обеспечивать автономную работу от съёмного модуля питания (аккумулятор 18650 ёмкостью 3350 мА·ч, зарядный модуль TP4056, преобразователь TPS63020, подпружиненные контакты, магнитное крепление, модуль беспроводной зарядки Qi стандарта на базе чипа STWBC-MC), в течение не менее 12 часов непрерывного мониторинга.
- Компонент: носимое устройство
- Критичность: S (желательное)
- Стабильность: D (динамичное)
- Тип: функциональное, коммуникационное/аппаратное

**W-F-7. Реал-тайм трансляция данных**
Носимое устройство должно поддерживать режим потоковой передачи сырых данных ЭКГ и ключевых медицинских показателей в реальном времени в пользовательский интерфейс родственников/оператора через сервер по протоколу WebSocket с частотой не менее 10 Гц.
- Компонент: носимое устройство
- Критичность: S (желательное)
- Стабильность: D (динамичное)
- Тип: функциональное, потоковые данные

### **3.1.2 Функции сервера-обработчика (Server, SRV-F)**

**SRV-F-1. Приём и хранение данных мониторинга**
Сервер должен принимать потоки данных ЭКГ, пульса, акселерометра, статусов устройств и аудио с носимых устройств в реальном времени, обеспечивать их хранение в реляционной базе данных PostgreSQL с временными метками и идентификаторами пациентов, а также предоставлять доступ к этим данным для последующего анализа и построения истории показателей.
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: функциональное, хранилище данных

**SRV-F-2. Анализ данных и генерация событий**
Сервер должен в режиме, близком к реальному времени, анализировать входящие данные по настраиваемым сценариям (6+ predefined правил: обострение гипертонии, предположения об аритмии/тахикардии/брадикардии/стенокардии/гипертрофии, падение, длительная неподвижность, повторные тревоги, потеря связи) и формировать события: «пограничное состояние» (информационное сообщение без тревоги), «критическое состояние», «тревожная кнопка», «отказ устройства/канала связи».
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: функциональное, бизнес-логика

**SRV-F-3. Оповещение UI и каналов связи (SLA ≤ 5 с)**
Сервер должен передавать уведомления о критических событиях в **мобильное приложение родственника** и **веб-интерфейс оператора** по WebSocket и инициировать автоматические звонки через мобильное приложение или интегрированную АТС (в зависимости от настройки и доступного канала) с суммарной задержкой системы (от детекции события на устройстве до доставки оповещения) не более 5 секунд.
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: функциональное, производительность

**SRV-F-4. Интеграция с АТС и экстренными службами**
Сервер должен предоставлять API для интеграции с телефонной АТС, мобильными приложениями и внешними сервисами экстренной связи, обеспечивая последовательность действий: автоматический дозвон основному родственнику → резервному контакту → службе скорой помощи при отсутствии подтверждения в течение заданного таймаута.
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: D (динамичное)
- Тип: функциональное, интеграционное

**SRV-F-5. Внешние API интерфейсы**
Сервер должен предоставлять REST API, MQTT и WebSocket интерфейсы для: получения текущего состояния пациентов и устройств; просмотра истории измерений и событий за заданный период; настройки индивидуальных пороговых значений и сценариев реагирования для каждого пациента.
- Компонент: сервер
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: функциональное, внешние интерфейсы

**SRV-F-6. Обнаружение отказов устройств и каналов**
Сервер должен автоматически определять отсутствие heartbeat-сообщений от носимого устройства в течение **настраиваемого** таймаута (по умолчанию 60 секунд) и генерировать событие «отказ устройства» или «отказ канала связи» с передачей в UI и эскалацией по сценарию связи.
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: функциональное, диагностическое

**SRV-F-7. Док-станция для зарядных модулей**
Сервер должен обладать встроенной функциональностью док-станции для съёмных модулей питания носимых устройств. Док-станция должна обеспечивать беспроводную зарядку съёмных аккумуляторных модулей стандарта Qi на базе чипа STWBC-MC на верхней поверхности корпуса с учётом безопасных уровней мощности и контроля состояния заряда.
- Компонент: сервер
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: функциональное, аппаратное обеспечение

### **3.1.3 Функции UI родственников (OP-F)**

**OP-F-1. Дашборд статуса пациента**
**Мобильное приложение** должно отображать статус привязанного пациента с цветовой индикацией текущего состояния: зелёный — норма; жёлтый — пограничные показатели; красный — критическое состояние/тревожная кнопка; чёрный — отказ устройства/отсутствие связи, с отображением ключевых текущих показателей (ЧСС, давление, заряд устройства).
- Компонент: Мобильное приложение (UI)
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: функциональное, UI

**OP-F-2. Обновление в реальном времени**
**Мобильное приложение** должно получать и отображать изменения статуса пациента, новые события и потоковые данные ЭКГ без ручного обновления посредством push-уведомлений или WebSocket-соединения.
- Компонент: Мобильное приложение (UI)
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: функциональное, UI/реального времени

**OP-F-3. Звуковая и push-индикация событий**
**Мобильное приложение** должно воспроизводить различимые звуковые сигналы и отображать push-уведомления для событий разной критичности (пороговые отклонения, тревожная кнопка, отказ устройства) с возможностью настройки громкости, тона и режима оповещения (вибрация).
- Компонент: Мобильное приложение (UI)
- Критичность: S (желательное)
- Стабильность: M (модифицируемое)
- Тип: функциональное, UI

**OP-F-4. Журнал событий и аналитика**
**Мобильное приложение** должно предоставлять структурированный журнал событий и интерактивные графики исторических данных (ЭКГ, ЧСС, движение) с фильтрацией по типу события и временному интервалу и возможностью экспорта отчётов, а также настройкой пороговых значений.
- Компонент: Мобильное приложение (UI)
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: функциональное, отчётность/аналитика

**OP-F-5. Диагностика устройств и управление**
**Мобильное приложение** должно отображать технические параметры носимого устройства (уровень сигнала Wi-Fi/BLE, время последней связи, уровень заряда аккумулятора, статус OTA-обновления) и предоставлять пользователям функции ручного управления: активация голосовой связи на устройстве пациента, проверочный звонок, принудительный вызов экстренных служб, отправка голосового сообщения.
- Компонент: Мобильное приложение (UI)
- Критичность: S (желательное)
- Стабильность: M (модифицируемое)
- Тип: функциональное, диагностическое/управляющее

### **3.1.4 Функции UI оператора экстренных служб (EMS-OP-F)**

**EMS-OP-F-1. Панель приёма инцидентов**
**Веб-интерфейс оператора** должен отображать список активных инцидентов (критических событий) с данными пациента: идентификатор, адрес, переданные ключевые показатели (ЧСС, давление), тип события (падение, тревожная кнопка, аритмия), время возникновения.
- Компонент: Веб-интерфейс оператора (UI)
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: функциональное, UI

**EMS-OP-F-2. Детализация инцидента и история**
**Веб-интерфейс оператора** должен предоставлять детальную информацию по выбранному инциденту: полная история здоровья пациента за последние 24 часа (графики ЭКГ, ЧСС, движения), журнал всех событий, контактные данные родственников, информация о пройденных этапах оповещения (звонки родственникам).
- Компонент: Веб-интерфейс оператора (UI)
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: функциональное, UI/аналитика

**EMS-OP-F-3. Интеграция с картами и навигацией**
**Веб-интерфейс оператора** должен отображать местоположение пациента (на основе адреса регистрации или данных геолокации с мобильного приложения родственника, если доступно) на интегрированной карте для упрощения планирования выезда бригады.
- Компонент: Веб-интерфейс оператора (UI)
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: функциональное, UI/интеграционное

**EMS-OP-F-4. Подтверждение и закрытие инцидента**
**Веб-интерфейс оператора** должен предоставлять функции для подтверждения получения тревоги, изменения статуса инцидента (например, «бригада выехала», «пациент передан медикам») и его закрытия с возможностью добавления краткого комментария.
- Компонент: Веб-интерфейс оператора (UI)
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: функциональное, UI/управляющее

**EMS-OP-F-5. Фильтрация и поиск**
**Веб-интерфейс оператора** должен позволять фильтровать инциденты по типу события, статусу, временному диапазону и осуществлять поиск по идентификатору пациента или адресу.
- Компонент: Веб-интерфейс оператора (UI)
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: функциональное, UI

## **3.2 Нефункциональные требования**

### Атрибуты нефункциональных требований

Каждое нефункциональное требование должно обладать следующими атрибутами:

- **ID** - уникальный идентификатор требования
- **Наименование** - краткое описание требования
- **Критичность** - M (обязательное), S (желательное), C (возможное)
- **Стабильность** - S (стабильное), M (модифицируемое), D (динамичное)

### Схема идентификаторов нефункциональных требований

| Префикс | Расшифровка | Категория |
|---------|-------------|-----------|
| REL-NF- | Non-Functional - Reliability | Надёжность |
| PERF-NF- | Non-Functional - Performance | Производительность |
| MAINT-NF- | Non-Functional - Maintainability | Ремонтопригодность |
| CONST-NF- | Non-Functional - Constraints | Ограничения проекта |

### **3.2.1 Надёжность (REL-NF)**

**REL-NF-1. Доступность системы мониторинга**
Система в целом (сервер + пользовательский интерфейс + каналы связи) должна обеспечивать коэффициент доступности не менее **99.9%** (downtime не более 8.76 часов в год) при круглосуточной эксплуатации 24/7 в режиме дистанционного мониторинга пациентов на базе Raspberry Pi 5. Для обеспечения непрерывной работы сервера при отключении электроэнергии система должна быть оснащена источником бесперебойного питания (ИБП) с достаточной ёмкостью для поддержания работы в течение критического периода.
- Компонент: система
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: нефункциональное, надёжность

**REL-NF-2. Время восстановления после отказа**
Максимальное время восстановления работоспособности после отказа критических компонентов (сервер, база данных, сетевые сервисы, АТС-интеграция) не должно превышать 10 минут с момента обнаружения инцидента.
- Компонент: система
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: нефункциональное, ремонтопригодность

**REL-NF-3. Автоматическое резервирование сервисов**
Система должна обеспечивать автоматический перезапуск критических сервисов сервера (контейнеризованные приложения Docker, базы данных, очереди сообщений) при обнаружении сбоев с использованием монитора процессов (например, `docker restart=always`, `systemd` или `supervisor`) для минимизации времени простоя до уровня единиц секунд.
- Компонент: сервер
- Критичность: S (желательное)
- Стабильность: M (модифицируемое)
- Тип: нефункциональное, отказоустойчивость

**REL-NF-4. Надёжность носимого устройства**
Носимое устройство должно обеспечивать устойчивую работу без аппаратных или программных перезагрузок в течение одной полной сессии мониторинга (не менее 12 часов при 100% загрузке) при соблюдении условий эксплуачения и заданных характеристик окружающей среды.
- Компонент: носимое устройство
- Критичность: M (обязательное)
- Стабильность: D (динамичное)
- Тип: нефункциональное, надёжность

### **3.2.2 Производительность (PERF-NF)**

**PERF-NF-1. Задержка отправки события с устройства**
Время задержки между аппаратной регистрацией критического события на носимом устройстве (превышение порога ЭКГ/ЧСС, детекция падения, активация тревожной кнопки) и моментом отправки сообщения на сервер не должно превышать 2 секунд в 99% случаев.
- Компонент: носимое устройство
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: нефункциональное, производительность

**PERF-NF-2. Время серверной обработки событий**
Время обработки критического события на сервере (анализ, формирование уведомления для UI, подготовка команды АТС/мобильного приложения) и отправки ответа не должно превышать 3 секунд в **95%** случаев при нагрузке до **N=30** одновременных устройств на одном экземпляре Raspberry Pi 5.
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: нефункциональное, производительность

**PERF-NF-3. Масштабируемость системы**
Система на базе **одного экземпляра Raspberry Pi 5** рассчитана на одновременное обслуживание до **N=30-50** носимых устройств (точное число подлежит уточнению в ходе нагрузочного тестирования) без превышения суммарного времени реакции системы более 5 секунд. Для масштабирования на **100+ устройств** требуется использование **кластера из нескольких экземпляров RPi5** (или более мощных серверов) с балансировкой нагрузки.
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: D (динамичное)
- Тип: нефункциональное, масштабируемость

**PERF-NF-4. Скорость обновления пользовательского интерфейса**
Пользовательский интерфейс (мобильное приложение и веб-интерфейс) должен обновлять визуальное отображение статуса пациента/инцидента после получения данных от сервера не более чем за 1 секунду с момента получения серверного уведомления.
- Компонент: UI
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: нефункциональное, производительность UI

**PERF-NF-5. Производительность ввода-вывода и хранения данных**
Серверная система на RPi5 должна использовать хранилище с высокой скоростью случайной записи (SSD через USB 3.0 или NVMe через PCIe). Работа с высоконагруженной базой данных PostgreSQL на microSD карте **не допускается**, так как это станет главным узким местом производительности и надёжности.
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: нефункциональное, производительность/инфраструктура

### **3.2.3 Ремонтопригодность (MAINT-NF)**

**MAINT-NF-1. Централизованное логирование**
Система должна поддерживать централизованное структурированное логирование всех событий приложений, диагностических сообщений, ошибок интеграции и попыток дозвона АТС на сервере с возможностью фильтрации, поиска и экспорта по идентификатору устройства, пациента и типу события.
- Компонент: сервер
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: нефункциональное, эксплуатационное

**MAINT-NF-2. Удалённое обновление прошивки (OTA)**
Носимые устройства должны поддерживать удалённое обновление прошивки (Over-The-Air), инициируемое с сервера через защищённый канал с проверкой целостности, аутентификацией и возможностью отката, минимизируя время простоя мониторинга до 5 минут.
- Компонент: носимое устройство + сервер
- Критичность: S (желательное)
- Стабильность: M (модифицируемое)
- Тип: нефункциональное, ремонтопригодность

**MAINT-NF-3. Диагностические сообщения в UI**
Пользовательский интерфейс (веб-интерфейс администратора) должен отображать детализированные диагностические сообщения о состоянии системы (ошибки связи с конкретным устройством, сбои интеграции АТС/мобильного приложения, ошибки базы данных, статусы очередей) с временными метками для оперативного анализа инцидентов службой технической поддержки.
- Компонент: UI (веб-интерфейс админа)
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: нефункциональное, эксплуатационное

### **3.2.4 Ограничения проекта (CONST-NF)**

**CONST-NF-1. Аппаратная платформа носимых устройств**
Носимые устройства должны реализовываться на базе микроконтроллера ESP32 со следующей конфигурацией: **родительский блок** (крепление на груди/поясе) с акселерометром LIS2DM, микрофоном INMP441, динамиком (MAX98357A), тревожной кнопкой, разъёмами для подключения внешних модулей; **подключаемая манжета** с двумя оптическими датчиками MAX30102EFD+T; **подключаемые нагрудные электроды** для датчика ЭКГ ADS1292R (интерфейс SPI); **опциональная подключаемая ушная клипса** с датчиком MAX30102EFD+T; **съёмный модуль питания** (аккумулятор 18650+TP4056+TPS63020+Qi STWBC-MC).
- Компонент: носимое устройство
- Критичность: M (обязательное)
- Стабильность: M (модифицируемое)
- Тип: ограничение реализации

**CONST-NF-2. Аппаратная платформа сервера**
Серверная часть должна разворачиваться на одноплатном компьютере **Raspberry Pi 5** со следующей минимальной конфигурацией: процессор Broadcom BCM2712 (2.4 ГГц, 4-ядерный Arm Cortex-A76); оперативная память 8 ГБ LPDDR4X (рекомендуется 16 ГБ); накопитель SSD через USB 3.0 или NVMe (не microSD); ОС Ubuntu 22.04/24.04 LTS для ARM или Raspberry Pi OS (64-bit); **обязательный встроенный модуль LTE с SIM-лотком**; сетевое подключение Gigabit Ethernet и Wi-Fi; корпус-докстанция с модулями беспроводной зарядки стандарта Qi на базе чипа STWBC-MC; контейнеризация Docker с оркестрацией Docker Compose.
- Компонент: сервер
- Критичность: M (обязательное)
- Стабильность: S (стабильное)
- Тип: ограничение инфраструктуры

**CONST-NF-3. Требования к доступу к пользовательскому интерфейсу**
**Мобильное приложение для родственников** должно быть доступно для iOS и Android. **Веб-интерфейс оператора экстренных служб** должен быть доступен через стандартные веб-браузеры (Chrome, Firefox, Safari, Edge последних версий) без установки дополнительного клиентского ПО.
- Компонент: UI
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: ограничение среды

**CONST-NF-4. Топология развёртывания**
Для частных случаев (дом, небольшая клиника) система может работать на **одном экземпляре Raspberry Pi 5**. Для коммерческого развёртывания или обслуживания большого числа пациентов (>50) архитектура системы должна поддерживать **горизонтальное масштабирование** путем добавления дополнительных серверных узлов (RPi5 или иных).
- Компонент: система
- Критичность: S (желательное)
- Стабильность: S (стабильное)
- Тип: ограничение архитектуры

## **3.3 Табличное представление требований**


### **3.3.1 Функциональные требования**

| ID | Компонент | Формулировка (кратко) | Критичность | Стабильность | Тип |
|---|---|---|---|---|---|
| W-F-1 | Носимое устройство | ЭКГ(ADS1292R через нагрудные электроды)+пульс(MAX30102EFD+T×2 в манжете+опц.клипса)+давление по дельте, предположения отклонений (аритмия/тахикардия/брадикардия/стенокардия/гипертрофия) | M (обязательное) | M (модифицируемое) | Функциональное, медицинский мониторинг |
| W-F-2 | Носимое устройство | Детекция падений(>3g с последующим отсутствием движения >1с)+неподвижность(>30с без изменений >0.1g)+аномальные движения(>2g) LIS2DM фиксированные пороги | M (обязательное) | M (модифицируемое) | Функциональное, алгоритмическое |
| W-F-3 | Носимое устройство | Тревожная кнопка GPIO, событие ≤2с Wi-Fi/BLE | M (обязательное) | S (стабильное) | Функциональное, интерфейс пользователя |
| W-F-4 | Носимое устройство | Голосовая связь(INMP441/MAX98357A)+звуковая индикация по команде из UI | S (желательное) | M (модифицируемое) | Функциональное, интерфейс пользователя |
| W-F-5 | Носимое устройство | Heartbeat-сообщения каждые 30с (настраиваемый интервал, по умолчанию 30с) MQTT/WebSocket | M (обязательное) | M (модифицируемое) | Функциональное, диагностическое |
| W-F-6 | Носимое устройство | Wi-Fi→BLE failover, съёмный АКБ модуль(18650 3350мА·ч+TP4056+TPS63020+Qi STWBC-MC) ≥12ч | S (желательное) | D (динамичное) | Функциональное, коммуникационное/аппаратное |
| W-F-7 | Носимое устройство | Поток ЭКГ в UI WebSocket ≥10Гц | S (желательное) | D (динамичное) | Функциональное, потоковые данные |
| SRV-F-1 | Сервер | Потоки→PostgreSQL хранение данных мониторинга (ЭКГ, пульс, акселерометр, статусы, аудио) | M (обязательное) | S (стабильное) | Функциональное, хранилище данных |
| SRV-F-2 | Сервер | Анализ 6+ сценариев(гипертония+аритмия/тахикардия/брадикардия/стенокардия/гипертрофия+падение+неподвижность+повторные тревоги+потеря связи), события пограничное/критическое/тревожная кнопка/отказ | M (обязательное) | M (модифицируемое) | Функциональное, бизнес-логика |
| SRV-F-3 | Сервер | UI(мобильное приложение+веб-интерфейс оператора)+моб.прил./АТС оповещение, SLA ≤5с | M (обязательное) | S (стабильное) | Функциональное, производительность |
| SRV-F-4 | Сервер | Интеграция: родственник→резерв→скорая (цепочка оповещений с таймаутом) | M (обязательное) | D (динамичное) | Функциональное, интеграционное |
| SRV-F-5 | Сервер | REST/MQTT/WebSocket API (состояния/история/настройки пороговых значений и сценариев) | S (желательное) | S (стабильное) | Функциональное, внешние интерфейсы |
| SRV-F-6 | Сервер | Детекция heartbeat≤60с (настраиваемый таймаут, по умолчанию 60с) → «отказ устройства/канала связи» | M (обязательное) | M (модифицируемое) | Функциональное, диагностическое |
| SRV-F-7 | Сервер | Док-станция Qi зарядка на базе чипа STWBC-MC съёмных АКБ модулей (безопасные уровни мощности, контроль заряда) | S (желательное) | S (стабильное) | Функциональное, аппаратное обеспечение |
| OP-F-1 | Мобильное приложение | Дашборд статуса пациента: зелёный(норма)/жёлтый(пограничные показатели)/красный(критическое/тревожная кнопка)/чёрный(отказ/нет связи) + показатели(ЧСС, давление, заряд) | M (обязательное) | S (стабильное) | Функциональное, UI |
| OP-F-2 | Мобильное приложение | WebSocket push обновление без релоада (статус, события, потоковые данные ЭКГ) | M (обязательное) | S (стабильное) | Функциональное, UI/real-time |
| OP-F-3 | Мобильное приложение | Звуковые сигналы и push-уведомления событий (пороговые отклонения, тревожная кнопка, отказ устройства) с настройкой громкости/тона/вибрации | S (желательное) | M (модифицируемое) | Функциональное, UI |
| OP-F-4 | Мобильное приложение | Журнал событий+графики ЭКГ/ЧСС/движения+фильтры(тип события, временной интервал)+экспорт отчётов+настройка пороговых значений | S (желательное) | S (стабильное) | Функциональное, отчётность/аналитика |
| OP-F-5 | Мобильное приложение | Диагностика устройства(сигнал Wi-Fi/BLE, время последней связи, заряд, статус OTA)+активация голосовой связи+проверочный звонок+принудительный вызов экстренных служб+отправка голосового сообщения | S (желательное) | M (модифицируемое) | Функциональное, диагностическое/управляющее |
| **EMS-OP-F-1** | **Веб-интерфейс оператора** | **Панель приёма инцидентов с данными пациента** | **M (обязательное)** | **S (стабильное)** | **Функциональное, UI** |
| **EMS-OP-F-2** | **Веб-интерфейс оператора** | **Детализация инцидента и история здоровья** | **M (обязательное)** | **S (стабильное)** | **Функциональное, UI/аналитика** |
| **EMS-OP-F-3** | **Веб-интерфейс оператора** | **Интеграция с картами для отображения местоположения** | **S (желательное)** | **S (стабильное)** | **Функциональное, UI/интеграционное** |
| **EMS-OP-F-4** | **Веб-интерфейс оператора** | **Подтверждение, смена статуса и закрытие инцидента** | **M (обязательное)** | **S (стабильное)** | **Функциональное, UI/управляющее** |
| **EMS-OP-F-5** | **Веб-интерфейс оператора** | **Фильтрация и поиск инцидентов** | **S (желательное)** | **S (стабильное)** | **Функциональное, UI** |

### **3.3.2 Нефункциональные требования**

| ID | Компонент | Формулировка (кратко) | Критичность | Стабильность | Тип |
|---|---|---|---|---|---|
| REL-NF-1 | Система | Доступность ≥99.9% (≤8.76ч/год downtime) 24/7 на RPi5 с ИБП для сервера | M (обязательное) | S (стабильное) | Нефункциональное, надёжность |
| REL-NF-2 | Система | Восстановление после отказа (сервер, БД, сетевые сервисы, АТС-интеграция) ≤10мин | M (обязательное) | M (модифицируемое) | Нефункциональное, ремонтопригодность |
| REL-NF-3 | Сервер | Автоперезапуск Docker контейнеров/БД/очередей (docker restart=always/systemd/supervisor) единицы секунд | S (желательное) | M (модифицируемое) | Нефункциональное, отказоустойчивость |
| REL-NF-4 | Носимое устройство | Безотказно ≥12ч сессии (100% загрузка) без аппаратных/программных перезагрузок | M (обязательное) | D (динамичное) | Нефункциональное, надёжность |
| PERF-NF-1 | Носимое устройство | Отправка события (превышение порога ЭКГ/ЧСС, падение, тревожная кнопка) ≤2с (99%) | M (обязательное) | M (модифицируемое) | Нефункциональное, производительность |
| PERF-NF-2 | Сервер | Обработка события (анализ+формирование уведомления UI+подготовка команды АТС/моб.прил.) ≤3с (95%, N=30 на узле) | M (обязательное) | M (модифицируемое) | Нефункциональное, производительность |
| PERF-NF-3 | Сервер | N=30-50 устройств на 1 RPi5 (точное число уточняется нагрузочным тестированием), SLA ≤5с; 100+ требует кластера с балансировкой | M (обязательное) | D (динамичное) | Нефункциональное, масштабируемость |
| PERF-NF-4 | UI | Обновление дашборда (статус пациента/инцидента, графики, события) ≤1с с момента получения серверного уведомления | S (желательное) | S (стабильное) | Нефункциональное, производительность UI |
| PERF-NF-5 | Сервер | Хранилище - только SSD(USB 3.0) или NVMe(PCIe), не microSD (узкое место производительности и надёжности PostgreSQL) | M (обязательное) | S (стабильное) | Нефункциональное, производительность/инфраструктура |
| MAINT-NF-1 | Сервер | Логи+фильтрация по идентификатору устройства/пациента/типу события+поиск+экспорт (события приложений, диагностика, ошибки интеграции, попытки дозвона АТС) | S (желательное) | S (стабильное) | Нефункциональное, эксплуатационное |
| MAINT-NF-2 | Носимое устройство + Сервер | OTA с проверкой целостности+аутентификацией+откатом, время простоя ≤5мин | S (желательное) | M (модифицируемое) | Нефункциональное, ремонтопригодность |
| MAINT-NF-3 | UI (веб-интерфейс админа) | Диагностика ошибок (связь с устройством, сбои интеграции АТС/моб.прил., ошибки БД, статусы очередей) с timestamp | S (желательное) | S (стабильное) | Нефункциональное, эксплуатационное |
| CONST-NF-1 | Носимое устройство | ESP32+ADS1292R(SPI, нагрудные электроды)/MAX30102EFD+T×2(манжета)+опц.клипса(MAX30102EFD+T)/LIS2DM(акселерометр)/INMP441(микрофон)/MAX98357A(динамик)+съёмный АКБ(18650+TP4056+TPS63020+Qi STWBC-MC) | M (обязательное) | M (модифицируемое) | Ограничение реализации |
| CONST-NF-2 | Сервер | Raspberry Pi 5 (Broadcom BCM2712 2.4ГГц 4-core ARM Cortex-A76/8-16GB LPDDR4X/USB 3.0 SSD или NVMe/Ubuntu 22.04/24.04 LTS ARM или RPi OS 64-bit/Docker Compose)+**обязательный LTE/SIM**+Gigabit Ethernet+Wi-Fi+Qi док-станция на базе чипа STWBC-MC+ИБП | M (обязательное) | S (стабильное) | Ограничение инфраструктуры |
| CONST-NF-3 | UI | Мобильное приложение (iOS/Android) + веб-интерфейс оператора (Chrome/Firefox/Safari/Edge последних версий) без клиентского ПО | S (желательное) | S (стабильное) | Ограничение среды |
| CONST-NF-4 | Система | Топология: 1 RPi5 (частные случаи: дом, небольшая клиника), кластер (коммерческое развёртывание >50 устройств) | S (желательное) | S (стабильное) | Ограничение архитектуры |

## **3.4 Требования к пользовательской документации**

Документация должна включать:

*   Описание ролей пользователей (пациент, родственник/опекун, оператор экстренных служб, технический администратор).
*   Руководство пользователя по эксплуатации носимого устройства: крепление родительского блока, манжеты и электродов, замена аккумулятора, использование тревожной кнопки.
*   Руководство пользователя по **мобильному приложению** для родственников: настройка оповещений, просмотр данных, управление голосовой связью.
*   Руководство оператора по **веб-интерфейсу экстренных служб**: работа с панелью инцидентов, просмотр данных пациента, действия по закрытию инцидента.
*   Инструкции по первоначальной настройке системы (регистрация устройств, подключение к сети, настройка IP-АТС).
*   Форматы сообщений и протоколов обмена между компонентами системы (для интеграторов).
*   Глоссарий терминов и историю изменений документации.

## **3.5 Используемые компоненты**

*   **Микроконтроллер носимого устройства**: ESP32 с поддержкой Wi‑Fi, Bluetooth, SPI, I2C, I2S, ADC.
*   **Сенсор ЭКГ**: ADS1292R с SPI‑интерфейсом.
*   **Оптические датчики пульса**: 2× MAX30102EFD+T (в запястной манжете) + 1× (опционально в ушной клипсе).
*   **Акселерометр**: LIS2DM с SPI/I2C, функциями детекции движения и падения (в родительском блоке).
*   **Аудиокомпоненты**: MEMS‑микрофон INMP441 (I2S), аудиоусилитель MAX98357A (I2S), динамик 8 Ом 0.5 Вт (в родительском блоке).
*   **Система питания носимого устройства**: литий‑ионный аккумулятор 18650 (3350 мА·ч), плата заряда TP4056, Buck‑Boost преобразователь TPS63020, съёмный модуль с магнитным креплением и беспроводной зарядкой (стандарт Qi на базе STWBC-MC).
*   **Серверная платформа**: Одноплатный компьютер Raspberry Pi 5 (Broadcom BCM2712, 4-ядерный Cortex-A76, 8-16 ГБ LPDDR4X), с SSD-накопителем, ОС Ubuntu 22.04/24.04 LTS для ARM или Raspberry Pi OS (64-bit), контейнеризация Docker.
*   **Периферия сервера**: Корпус с интегрированной док-станцией беспроводной зарядки стандарта Qi на базе чипа STWBC-MC, **обязательный модуль LTE с SIM-лотком**, **источник бесперебойного питания (ИБП)** на базе аккумуляторной сборки повышенной ёмкости (например, 2× 18650 или Li-Po) с контроллером заряда TP4056 и повышающим преобразователем TPS63020 для обеспечения работы сервера при отключении электроэнергии.
*   **Механика и крепления**: Ремешки для крепления родительского блока на груди/поясе, регулируемая манжета на запястье, самоклеящиеся нагрудные электроды, клипса для уха.

## **3.6 Интерфейсы**

*   **Интерфейс пользователя**:
    *   **Для родственника**: Мобильное приложение (iOS/Android) с цветовым кодированием статусов, push-уведомлениями и возможностью активации двусторонней аудиосвязи.
    *   **Для оператора экстренных служб**: Веб-приложение, адаптированное для ПК, с панелью инцидентов, детализацией данных пациента и интеграцией с картами.
*   **Аппаратные интерфейсы носимого устройства**:
    *   **Родительский блок**: Разъёмы для подключения манжеты (I2C), электродов (SPI через ADS1292R), опциональной клипсы (I2C). Механические контакты для съёмного аккумулятора с поддержкой беспроводной зарядки стандарта Qi на базе чипа STWBC-MC. GPIO для тревожной кнопки.
    *   **Датчики**: Сам датчик ЭКГ ADS1292R подключен к микроконтроллеру по **SPI**. Оптические датчики и акселерометр — по **I2C**. Аудиокомпоненты — по **I2S**.
*   **Аппаратные интерфейсы сервера**:
    *   **Серверная платформа**: Raspberry Pi 5 с интерфейсами USB 3.0 (для SSD), PCIe (для NVMe), Gigabit Ethernet, Wi-Fi, модуль LTE с SIM-лотком.
    *   **Док-станция**: Встроенная в корпус сервера док-станция с модулями беспроводной зарядки стандарта Qi на базе чипа STWBC-MC для одновременной зарядки съёмных аккумуляторных модулей носимых устройств.
    *   **Источник бесперебойного питания (ИБП)**: Интегрированный или внешний ИБП с аккумуляторной сборкой для обеспечения работы сервера при отключении электроэнергии.
*   **Программные интерфейсы (API)**:
    *   **Внутренние**: MQTT и WebSocket для обмена данными в реальном времени между устройствами и сервером.
    *   **Внешние**: REST API для интеграции с IP-АТС, службами экстренной связи (для передачи структурированных данных об инциденте в UI оператора) и сторонними системами. API для управления настройками и получения исторических данных.
*   **Интерфейсы коммуникаций**:
    *   **Основной канал (устройство-сервер)**: Wi-Fi 802.11 (b/g/n/ac).
    *   **Резервный канал (устройство-сервер)**: Bluetooth Low Energy (BLE).
    *   **Внешний канал (сервер-интернет)**: **Обязательное мультиподключение**: Gigabit Ethernet (приоритет), Wi-Fi (резерв), и **обязательный** LTE (через SIM) в качестве финального резерва для исходящих оповещений и связи с АТС.

## **3.7 Требования лицензирования**

Система должна соблюдать стандарты лицензирования используемого программного обеспечения и компонентов, включая:

*   Использование библиотек и фреймворков с разрешающими open-source лицензиями (MIT, BSD, Apache 2.0) для ESP32 и серверного ПО.
*   Соблюдение лицензионных требований операционной системы (Ubuntu/Raspberry Pi OS) и системного ПО (Docker, PostgreSQL).
*   Обеспечение возможности коммерческого использования всех выбранных компонентов без нарушения лицензионных соглашений.
*   Документирование всех используемых сторонних компонентов и их лицензий.

## **3.8 Применимые стандарты**

*   **IEEE Std 830‑1998** — Рекомендуемая практика для спецификации требований к программному обеспечению.
*   **Стандарты электробезопасности** — Соответствие требованиям для носимой электроники (например, IEC 60601-1 или аналогичные региональные стандарты для непрямого медицинского наблюдения).
*   **Стандарты защиты данных** — Соблюдение применимого законодательства о защите персональных данных (например, GDPR для ЕС, ФЗ-152 для РФ) при обработке биометрической информации.
*   **Стандарты беспроводной связи** — Wi-Fi (IEEE 802.11), Bluetooth (IEEE 802.15.1), сотовой связи (3GPP для LTE).
*   **Стандарты медицинских устройств (как аппаратные, так и программные)** — Следование рекомендациям для устройств wellness-класса, не требующих регистрации как медицинское изделие, с акцентом на безопасность и корректность предупреждений.

---

# **4. Индекс**

*   **ЭКГ** — электрокардиограмма, [1](#1-введение), [2](#2-общее-описание), [3](#3-детальные-требования)
*   **ЧСС** — частота сердечных сокращений, [1](#1-введение), [2](#2-общее-описание), [3](#3-детальные-требования)
*   **IP-АТС** — IP-телефония (Автоматическая телефонная станция), [1](#1-введение), [2](#2-общее-описание), [3](#3-детальные-требования)
*   **OTA** — обновление ПО "по воздуху" (Over-The-Air), [1](#1-введение), [3](#3-детальные-требования)
*   **Heartbeat** — периодические диагностические сообщения о состоянии, [1](#1-введение), [3](#3-детальные-требования)
*   **Акселерометр** — датчик движения и ускорения, [1](#1-введение), [3](#3-детальные-требования)
*   **ESP32** — микроконтроллер с Wi-Fi и Bluetooth, [1](#1-введение), [3](#3-детальные-требования)
*   **MQTT** — протокол публикации/подписки для IoT, [1](#1-введение), [3](#3-детальные-требования)
*   **WebSocket** — протокол двусторонней связи, [2](#2-общее-описание), [3](#3-детальные-требования)
*   **REST** — архитектурный стиль взаимодействия по HTTP, [1](#1-введение), [3](#3-детальные-требования)
*   **Raspberry Pi 5 (RPi5)** — серверная платформа, [1](#1-введение), [2](#2-общее-описание), [3](#3-детальные-требования)
*   **PostgreSQL** — система управления базами данных, [1](#1-введение), [3](#3-детальные-требования)
*   **Docker** — система контейнеризации ПО, [1](#1-введение), [3](#3-детальные-требования)
*   **UI** — пользовательский интерфейс, [1](#1-введение), [2](#2-общее-описание), [3](#3-детальные-требования)
*   **SLA** — соглашение об уровне обслуживания, [3](#3-детальные-требования)
*   **BLE** — Bluetooth Low Energy, [1](#1-введение), [2](#2-общее-описание), [3](#3-детальные-требования)
*   **API** — интерфейс программирования приложений, [1](#1-введение), [2](#2-общее-описание), [3](#3-детальные-требования)
*   **ИБП** — источник бесперебойного питания, [1](#1-введение), [2](#2-общее-описание), [3](#3-детальные-требования)
*   **LTE** — стандарт сотовой связи, [2](#2-общее-описание), [3](#3-детальные-требования)
*   **SSD** — твердотельный накопитель, [2](#2-общее-описание), [3](#3-детальные-требования)
*   **NVMe** — интерфейс для подключения накопителей, [2](#2-общее-описание), [3](#3-детальные-требования)
*   **SPI** — последовательный периферийный интерфейс, [1](#1-введение), [3](#3-детальные-требования)
*   **I2C** — интерфейс межмикросхемного взаимодействия, [1](#1-введение), [3](#3-детальные-требования)
*   **I2S** — интерфейс цифровой передачи аудиосигнала, [1](#1-введение), [3](#3-детальные-требования)
*   **Док-станция** — устройство для беспроводной зарядки аккумуляторов, [2](#2-общее-описание), [3](#3-детальные-требования)

---
